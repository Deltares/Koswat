# Use case: Koswat from command line

## Requirements

This step requires that you have python running in your system 

## Installation

### Preparation

Ensure you have a valid python environment with pip. If you are using conda you can do so with the following command:

```console
conda create -n koswat_env python==3.13 pip
```
> Note: At the time of writing of this document koswat is supported for `python>=3.11,<3.14`.

### Installation

We are going to install the latest version available of koswat:

```console
pip install git+https://github.com/Deltares/Koswat.git
```
> If you prefer installing a fix version ([check released tags](https://github.com/Deltares/Koswat/tags)) you can do so as `pip install git+https://github.com/Deltares/Koswat.git@v0.14.0`

Installation should start immediately:

```shell
C:\your_checkout_dir>pip install git+https://github.com/Deltares/Koswat.git
Collecting git+https://github.com/Deltares/Koswat.git
...
Successfully built koswat
Installing collected packages: pytz, tzdata, six, pyshp, pyparsing, pillow, packaging, numpy, more-itertools, kiwisolver, fonttools, cycler, colorama, certifi, shapely, python-dateutil, pyproj, pyogrio, contourpy, click, pandas, matplotlib, geopandas, koswat
Successfully installed certifi-2025.11.12 click-8.3.1 colorama-0.4.6 contourpy-1.3.3 cycler-0.12.1 fonttools-4.60.1 geopandas-1.1.1 kiwisolver-1.4.9 koswat-0.15.0 matplotlib-3.10.7 more-itertools-10.8.0 numpy-2.3.5 packaging-25.0 pandas-2.3.3 pillow-12.0.0 pyogrio-0.11.1 pyparsing-3.2.5 pyproj-3.7.2 pyshp-3.0.2.post1 python-dateutil-2.9.0.post0 pytz-2025.2 shapely-2.1.2 six-1.17.0 tzdata-2025.2
```

Let's verify the installation with `pip show koswat`:

```shell
C:\your_checkout_dir>pip show koswat
Name: koswat
Version: 0.15.0
Summary: Koswat, from the dutch combination of words `Kosts-Wat` (what are the costs). Analyzes all the possible dikes reinforcements based on a provided traject, with surrounding constructions, and what their related costs will be.
...
```

You should be good to go to the next step.

## Running 

### Via command line

Assuming the previous steps went correctly, you can now run koswat via python command line.

```console
C:\> python -m koswat --help
Usage: koswat [OPTIONS]

  CLI call to execute a Koswat analysis given a settings files (`input_file`).
  The log is generated by default in the execute path, unless otherwise
  specified in the `log_output` argument.

  Args:     input_file (str): Location of the `*.json` file containing the
  execution settings for Koswat.     log_output (str): Optional argument to
  specify where will be created the `koswat.log` file.

Options:
  --input_file TEXT  Full path to the config input file.
  --log_output TEXT  Directory location where to generate the Koswat log file.
  --help             Show this message and exit.
```

So let's run it based on our `basic_case` example

```console
C:\> python -m koswat --input_file basic_case\koswat_general.json
2025-11-26 10:24:32 AM - [koswat_handler.py:119] - root - INFO - Initialized Koswat.
2025-11-26 10:24:32 AM - [koswat_run_settings_importer.py:70] - root - INFO - Importing CSV configuration from basic_case\koswat_general.json
2025-11-26 10:24:32 AM - [koswat_costs_importer.py:41] - root - INFO - Importing costs settings from basic_case\koswat_costs.json.
...
2025-11-26 10:24:45 AM - [koswat_handler.py:59] - root - INFO - Exported summary results to: basic_case\results_output\dike_10-1-1-A-1-A\scenario_scenario2
2025-11-26 10:24:46 AM - [koswat_handler.py:71] - root - INFO - Exported comparison plots to: basic_case\results_output\dike_10-1-1-A-1-A\scenario_scenario2
2025-11-26 10:24:46 AM - [koswat_handler.py:71] - root - INFO - Exported comparison plots to: basic_case\results_output\dike_10-1-1-A-1-A\scenario_scenario2
2025-11-26 10:24:47 AM - [koswat_handler.py:71] - root - INFO - Exported comparison plots to: basic_case\results_output\dike_10-1-1-A-1-A\scenario_scenario2
2025-11-26 10:24:47 AM - [koswat_handler.py:71] - root - INFO - Exported comparison plots to: basic_case\results_output\dike_10-1-1-A-1-A\scenario_scenario2
2025-11-26 10:24:47 AM - [koswat_handler.py:71] - root - INFO - Exported comparison plots to: basic_case\results_output\dike_10-1-1-A-1-A\scenario_scenario2
2025-11-26 10:24:47 AM - [koswat_handler.py:123] - root - INFO - Finalized Koswat.
```


### Via scripting

If you prefer to run it as a python script, you can still do so as follows:

```python
from pathlib import Path
from koswat import KoswatHandler

# Locate our model to run
_examples_dir = Path(__file__).parent
_basic_case_dir = _examples_dir.joinpath("basic_case")
assert _basic_case_dir.is_dir()

_config_file = _basic_case_dir.joinpath("koswat_general.json")
assert _config_file.is_file()

# Create a results directory
_results_dir = _examples_dir.joinpath("results")
_results_dir.mkdir()

# Run model
with KoswatHandler(_results_dir) as _handler:
    _handler.run_analysis(_config_file)
```