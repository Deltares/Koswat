<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Koswat design - Koswat</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Koswat design";
        var mkdocs_page_input_path = "reference/koswat_architecture.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Koswat
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Koswat</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../user_manual.html">User manual</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Koswat design</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#component-module-hierarchy">Component-module hierarchy</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#inheritance">Inheritance</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#protocols">Protocols</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#builder-pattern">Builder pattern</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="koswat_cost_report.html">Cost report</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="koswat_dike.html">Dike profile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="koswat_main_workflow.html">Main workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="koswat_reinforced_profile.html">Reinforcement profile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="koswat_strategies.html">Strategies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="koswat_surroundings.html">Surroundings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Koswat docstrings</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="koswat_docstrings/cost_report.html">Cost report module</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="koswat_docstrings/koswat_handler.html">Koswat handler</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="koswat_docstrings/koswat_main.html">Main</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="koswat_docstrings/strategies.html">Strategies</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Configuration</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/configuration/koswat_config_protocol.html">Koswat Config Protocol</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Core</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/core/geometries.html">Core geometries module</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/core/io.html">Input Output core module</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/core/koswat_logger.html">Koswat logger</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/core/protocols.html">Core protocols module</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Dike</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/dike/layers.html">Dike layers module.</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/dike/profile.html">Koswat dike profile module</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/dike/surroundings.html">Koswat dike surroundings</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Dike reinforcements</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/dike_reinforcements/reinforcement_layers.html">Reinforcement Layers Wrapper</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/dike_reinforcements/reinforcement_profile.html">Reinforcement profile</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Plots</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/plots/dike.html">Dike plotting module</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/plots/geometries.html">Geometries plot module</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="koswat_docstrings/plots/plots.html">Plots module</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Koswat</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Reference</li>
      <li class="breadcrumb-item active">Koswat design</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Deltares/koswat/edit/master/docs/reference/koswat_architecture.md">Edit on Deltares/koswat</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="koswat-design">Koswat design<a class="headerlink" href="#koswat-design" title="Permanent link">&para;</a></h1>
<p>In general, the architecture of this package is based on the following principles:</p>
<ul>
<li>Single responsibility principle, <a href="#component-hierarchy">component hierarchy</a>.</li>
<li>Open-closed principle, <a href="#inheritance">inheritance</a>.</li>
<li>Interface segregation principle, <a href="#protocols">protocols</a>.</li>
</ul>
<h2 id="component-module-hierarchy">Component-module hierarchy<a class="headerlink" href="#component-module-hierarchy" title="Permanent link">&para;</a></h2>
<p>We cluster entities into modules (components) that represent their domain and have minimal dependencies with others components, this way the modules can be accessed when operating Koswat as a sandbox. Within each component we apply the same principle and create sub-modules to reduce dependencies.</p>
<p>At the current (unreleased) version <code>v.0.15.0</code> the component hierarchy looks like follows:</p>
<div class="highlight"><pre><span></span><code>koswat/

    configuration/  # Data structures required for a koswat run.
        geometries/
        io/
        settings/

    core/           # Generic definitions and functionatilities.
        geometries/
        io/
        protocols/

    cost_report/    # Summary of costs per dike reinforcement.
        io/
        infrastructure/
        multi_location_profile/
        profile/
        summary/

    dike/           # Definition of a koswat dike.
        characteristic_points/
        layers/
        material/
        profile/
        surroundings/

    dike_reinforcements/   # Dike calculations to generate possible reinforcements.
        input_profile/
        io/
        reinforcement_layers/
        reinforcement_profile/

    plots/          # Generic functionality for plotting.
        dike/
        geometries/

    strategies/     # Different selection methods of all possible dike reinforcements alongside a dike traject.
        order_strategy
</code></pre></div>
<p>And the components interdependencies could be slightly represented as in the following diagram:</p>
<table>
<thead>
<tr>
<th style="text-align: center;"><img alt="Component diagram" src="imgs/component_diagram.drawio.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Image 1. Component diagram</td>
</tr>
</tbody>
</table>
<h2 id="inheritance">Inheritance<a class="headerlink" href="#inheritance" title="Permanent link">&para;</a></h2>
<p>To facilitate the <code>Open-Closed principle</code> most of our classes have parameterless constructors (<code>__init__</code> method). Then, to instantiate objects we often relay on the implementation of <a href="#builder-pattern">builder patterns</a></p>
<h2 id="protocols">Protocols<a class="headerlink" href="#protocols" title="Permanent link">&para;</a></h2>
<p>In Koswat we make use of <a href="https://docs.python.org/3/library/typing.html?highlight=protocol#typing.Protocol">Protocols</a> to define the <strong>required</strong> and <strong>essential</strong> properties and methods that represent an entity. Although Python does not always enforce these types as other OO languages would do (for instance C#), we try to follow and respect this principle throughought the whole repository.</p>
<h3 id="builder-pattern">Builder pattern<a class="headerlink" href="#builder-pattern" title="Permanent link">&para;</a></h3>
<p>Check for instance this <a href="https://en.wikipedia.org/wiki/Builder_pattern">wikipedia article</a> for a more detailed reference.</p>
<p>Because most of our classes have dependencies on other classes their initialization would require multiple steps that would become tedious and hard to maintain if they were defined in the default <strong>init</strong> method. Moreover, this approach would violate the open-closed principle. </p>
<p>Therefore, we apply the builder pattern to reduce complexity at the classes, improving maintainability and enabling future developments to create a separate builder shall the design require a different way of instantiating a given class.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../user_manual.html" class="btn btn-neutral float-left" title="User manual"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="koswat_cost_report.html" class="btn btn-neutral float-right" title="Cost report">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2022 Carsopre</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Deltares/koswat" class="fa fa-code-fork" style="color: #fcfcfc"> Deltares/koswat</a>
        </span>
    
    
      <span><a href="../user_manual.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="koswat_cost_report.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
